apply plugin: 'java'

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
}

//http://stackoverflow.com/questions/3445825/gradle-how-do-i-build-a-jar-with-a-lib-dir-with-other-jars-in-it
jar {
    from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
}

jar {
    manifest {
        attributes 'Main-Class': 'com.masonliu.syncxcodefolder.Main'
    }
}

// for example ./gradlew exec -P projPath='/Users/admin/Project/YouCaiRestaurant.xcodeproj'
task exec(dependsOn: jar) << {
    if (project.hasProperty('projPath')) {
        print projPath
    }
    project.exec {
        workingDir project.buildDir.absolutePath + "/libs"
        executable "java"
        args "-jar", "java_project.jar",projPath
    }
}